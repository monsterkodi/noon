// koffee 1.3.0

/*
00000000    0000000   00000000    0000000  00000000
000   000  000   000  000   000  000       000
00000000   000000000  0000000    0000000   0000000
000        000   000  000   000       000  000
000        000   000  000   000  0000000   00000000
 */
var parse;

parse = function(s) {
    var EMPTY, FLOAT, INT, NEWLINE, addLine, d, dd, dk, dv, e, i, indent, insert, inspect, isArray, j, k, key, l, last, leadingSpaces, len, line, lines, makeObject, p, r, ref, ref1, ref2, stack, ud, undense, v, value, values, vl;
    if (!s) {
        return '';
    }
    if (s === '') {
        return '';
    }
    EMPTY = /^\s*$/;
    NEWLINE = /\r?\n/;
    FLOAT = /^(\-|\+)?([0-9]+(\.[0-9]+)?|Infinity)$/;
    INT = /^(\-|\+)?([0-9]+|Infinity)$/;
    last = function(a) {
        return a != null ? a[a.length - 1] : void 0;
    };
    isArray = function(a) {
        return (a != null) && typeof a === 'object' && a.constructor.name === 'Array';
    };
    undense = function(d, s) {
        var esc, i, j, key, l, ld, p, pp, ref, sd, sl, t;
        sl = s.length;
        sd = d;
        p = 0;
        while (p < sl && s[p] === '.') {
            d += 1;
            p += 1;
        }
        while (p < sl && s[p] === ' ') {
            p += 1;
        }
        l = '';
        key = true;
        esc = false;
        while (p < sl) {
            if (l !== '' && s[p] === ' ' && s[p + 1] === '.') {
                pp = p + 2;
                while (pp < sl && s[pp] === '.') {
                    pp += 1;
                }
                if (s[pp] === ' ') {
                    p += 1;
                    break;
                }
            }
            esc |= s[p] === '|';
            l += s[p];
            if (!esc && key && s[p] === ' ') {
                if (p < sl + 1 && s[p + 1] !== ' ') {
                    l += ' ';
                }
                key = false;
            }
            p += 1;
            esc ^= s[p] === '|';
        }
        ld = '';
        for (i = j = 0, ref = d; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
            ld += ' ';
        }
        ld += l;
        if (p < sl) {
            t = undense(sd, s.substring(p));
            t.unshift(ld);
            return t;
        } else {
            return [ld];
        }
    };
    leadingSpaces = 0;
    lines = s.split(NEWLINE).filter(function(l) {
        return !EMPTY.test(l);
    });
    if (lines.length === 0) {
        return '';
    } else if (lines.length === 1) {
        lines = [lines[0].trim()];
    } else {
        while (lines[0][leadingSpaces] === ' ') {
            leadingSpaces += 1;
        }
    }
    stack = [
        {
            o: [],
            d: leadingSpaces
        }
    ];
    makeObject = function(t) {
        var b, i, j, len, o, ref;
        o = {};
        ref = t.o;
        for (j = 0, len = ref.length; j < len; j++) {
            i = ref[j];
            o[i] = null;
        }
        t.l = last(t.o);
        t.o = o;
        if (stack.length > 1) {
            b = stack[stack.length - 2];
            if (isArray(b.o)) {
                b.o.pop();
                b.o.push(o);
            } else {
                b.o[b.l] = o;
            }
        }
        return o;
    };
    key = function(k) {
        if ((k != null ? k[0] : void 0) === '|') {
            if (k[k.length - 1] === '|') {
                return k.substr(1, k.length - 2);
            }
            return k.substr(1).trimRight();
        }
        return k;
    };
    values = {
        'null': null,
        'true': true,
        'false': false
    };
    value = function(v) {
        if (values[v] !== void 0) {
            return values[v];
        }
        if ((v != null ? v[0] : void 0) === '|') {
            return key(v);
        } else if ((v != null ? v[v.length - 1] : void 0) === '|') {
            return v.substr(0, v.length - 1);
        }
        if (FLOAT.test(v)) {
            return parseFloat(v);
        }
        if (INT.test(v)) {
            return parseInt(v);
        }
        return v;
    };
    insert = function(t, k, v) {
        if (isArray(t.o)) {
            if (v == null) {
                if (last(t.o) === '.') {
                    t.o.pop();
                    t.o.push([]);
                }
                return t.o.push(value(k));
            } else {
                return makeObject(t)[key(k)] = value(v);
            }
        } else {
            t.o[key(k)] = value(v);
            return t.l = key(k);
        }
    };
    indent = function(t, k, v) {
        var l, o;
        o = [];
        if (v != null) {
            o = {};
        }
        if (isArray(t.o)) {
            if (last(t.o) === '.') {
                t.o.pop();
                t.o.push(o);
            } else {
                l = last(t.o);
                makeObject(t);
                t.o[l] = o;
            }
        } else {
            t.o[t.l] = o;
        }
        if (v != null) {
            o[key(k)] = value(v);
        } else {
            o.push(value(k));
        }
        return o;
    };
    addLine = function(d, k, v) {
        var ref, t, undensed;
        if (k != null) {
            t = last(stack);
            ref = [t.undensed, false], undensed = ref[0], t.undensed = ref[1];
            if (d > t.d && !undensed) {
                return stack.push({
                    o: indent(t, k, v),
                    d: d
                });
            } else if (d < t.d) {
                if (isArray(t.o) && last(t.o) === '.') {
                    t.o.pop();
                    t.o.push([]);
                }
                while (t.d > d) {
                    stack.pop();
                    t = last(stack);
                }
                return insert(t, k, v);
            } else {
                if (undensed) {
                    t.d = d;
                }
                return insert(t, k, v);
            }
        }
    };
    inspect = function(l) {
        var d, escl, escr, k, p, v;
        p = 0;
        while (l[p] === ' ') {
            p += 1;
        }
        if (l[p] == null) {
            return [0, null, null, false];
        }
        d = p;
        k = '';
        if (l[p] === '#') {
            return [0, null, null, false];
        }
        escl = false;
        escr = false;
        if (l[p] === '|') {
            escl = true;
            k += '|';
            p += 1;
        }
        while (l[p] != null) {
            if (l[p] === ' ' && l[p + 1] === ' ' && !escl) {
                break;
            }
            k += l[p];
            p += 1;
            if (escl && l[p - 1] === '|') {
                break;
            }
        }
        if (!escl) {
            k = k.trimRight();
        }
        while (l[p] === ' ') {
            p += 1;
        }
        v = '';
        if (l[p] === '|') {
            escr = true;
            v += '|';
            p += 1;
        }
        while (l[p] != null) {
            v += l[p];
            p += 1;
            if (escr && l[p - 1] === '|' && l.trimRight().length === p) {
                break;
            }
        }
        if (l[p - 1] === ' ' && !escr) {
            if (v != null) {
                v = v.trimRight();
            }
        }
        if (k === '') {
            k = null;
        }
        if (v === '') {
            v = null;
        }
        return [d, k, v, escl];
    };
    if (lines.length === 1) {
        if (0 < lines[0].indexOf(':: ')) {
            lines = lines[0].split(':: ').map(function(l) {
                var p;
                p = 0;
                while (l[p] === ' ') {
                    p += 1;
                }
                while ((l[p] != null) && (l[p] !== ' ')) {
                    p += 1;
                }
                if (l[p] === ' ') {
                    return l.slice(0, p) + ' ' + l.slice(p);
                } else {
                    return l;
                }
            });
        }
        p = lines[0].indexOf(' . ');
        e = lines[0].indexOf('|');
        if (p > 0 && (p === lines[0].indexOf(' ')) && (e < 0 || p < e)) {
            lines = [lines[0].slice(0, p) + ' ' + lines[0].slice(p)];
        }
    }
    i = 0;
    while (i < lines.length) {
        line = lines[i];
        ref = inspect(line), d = ref[0], k = ref[1], v = ref[2], e = ref[3];
        if (k != null) {
            if ((v != null) && (!e) && (v.substr(0, 2) === '. ')) {
                addLine(d, k);
                ud = last(stack).d;
                ref1 = undense(d, v);
                for (j = 0, len = ref1.length; j < len; j++) {
                    e = ref1[j];
                    ref2 = inspect(e), dd = ref2[0], dk = ref2[1], dv = ref2[2];
                    addLine(dd, dk, dv);
                }
                while (last(stack).d > ud + 1) {
                    stack.pop();
                }
                last(stack).undensed = true;
            } else {
                if (k === '...' && (v == null)) {
                    i += 1;
                    vl = [];
                    while (lines[i].trimLeft().substr(0, 3) !== '...') {
                        l = lines[i].trim();
                        if (l[0] === '|') {
                            l = l.substr(1);
                        }
                        if (l[l.length - 1] === '|') {
                            l = l.substr(0, l.length - 1);
                        }
                        vl.push(l);
                        i += 1;
                    }
                    k = vl.join('\n');
                    r = lines[i].trimLeft().substr(3).trim();
                    if (r.length) {
                        v = r;
                    }
                }
                if (v === '...') {
                    i += 1;
                    vl = [];
                    while (lines[i].trim() !== '...') {
                        l = lines[i].trim();
                        if (l[0] === '|') {
                            l = l.substr(1);
                        }
                        if (l[l.length - 1] === '|') {
                            l = l.substr(0, l.length - 1);
                        }
                        vl.push(l);
                        i += 1;
                    }
                    v = vl.join('\n');
                }
                addLine(d, k, v);
            }
        }
        i += 1;
    }
    return stack[0].o;
};

module.exports = parse;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyc2UuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBOztBQVFBLEtBQUEsR0FBUSxTQUFDLENBQUQ7QUFFSixRQUFBO0lBQUEsSUFBYSxDQUFJLENBQWpCO0FBQUEsZUFBTyxHQUFQOztJQUNBLElBQWEsQ0FBQSxLQUFLLEVBQWxCO0FBQUEsZUFBTyxHQUFQOztJQUVBLEtBQUEsR0FBVTtJQUNWLE9BQUEsR0FBVTtJQUNWLEtBQUEsR0FBVTtJQUNWLEdBQUEsR0FBVTtJQUVWLElBQUEsR0FBTyxTQUFDLENBQUQ7MkJBQU8sQ0FBRyxDQUFBLENBQUMsQ0FBQyxNQUFGLEdBQVMsQ0FBVDtJQUFWO0lBQ1AsT0FBQSxHQUFVLFNBQUMsQ0FBRDtlQUFPLFdBQUEsSUFBTyxPQUFPLENBQVAsS0FBYSxRQUFwQixJQUFpQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQWQsS0FBc0I7SUFBOUQ7SUFRVixPQUFBLEdBQVUsU0FBQyxDQUFELEVBQUksQ0FBSjtBQUNOLFlBQUE7UUFBQSxFQUFBLEdBQUssQ0FBQyxDQUFDO1FBQ1AsRUFBQSxHQUFLO1FBRUwsQ0FBQSxHQUFJO0FBQ0osZUFBTSxDQUFBLEdBQUksRUFBSixJQUFXLENBQUUsQ0FBQSxDQUFBLENBQUYsS0FBUSxHQUF6QjtZQUNJLENBQUEsSUFBSztZQUNMLENBQUEsSUFBSztRQUZUO0FBSUEsZUFBTSxDQUFBLEdBQUksRUFBSixJQUFXLENBQUUsQ0FBQSxDQUFBLENBQUYsS0FBUSxHQUF6QjtZQUNJLENBQUEsSUFBSztRQURUO1FBR0EsQ0FBQSxHQUFJO1FBQ0osR0FBQSxHQUFNO1FBQ04sR0FBQSxHQUFNO0FBRU4sZUFBTSxDQUFBLEdBQUksRUFBVjtZQUNJLElBQUcsQ0FBQSxLQUFLLEVBQUwsSUFBWSxDQUFFLENBQUEsQ0FBQSxDQUFGLEtBQVEsR0FBcEIsSUFBNEIsQ0FBRSxDQUFBLENBQUEsR0FBRSxDQUFGLENB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SUFBRyxDQUFDLENBQUMsTUFBTDt3QkFDSSxDQUFBLEdBQUksRUFEUjtxQkFYSjs7Z0JBY0EsSUFBRyxDQUFBLEtBQUssS0FBUjtvQkFDSSxDQUFBLElBQUs7b0JBQ0wsRUFBQSxHQUFLO0FBQ0wsMkJBQU0sS0FBTSxDQUFBLENBQUEsQ0FBRSxDQUFDLElBQVQsQ0FBQSxDQUFBLEtBQW1CLEtBQXpCO3dCQUNJLENBQUEsR0FBSSxLQUFNLENBQUEsQ0FBQSxDQUFFLENBQUMsSUFBVCxDQUFBO3dCQUNKLElBQUcsQ0FBRSxDQUFBLENBQUEsQ0FBRixLQUFRLEdBQVg7NEJBQW9CLENBQUEsR0FBSSxDQUFDLENBQUMsTUFBRixDQUFTLENBQVQsRUFBeEI7O3dCQUNBLElBQUcsQ0FBRSxDQUFBLENBQUMsQ0FBQyxNQUFGLEdBQVMsQ0FBVCxDQUFGLEtBQWlCLEdBQXBCOzRCQUE2QixDQUFBLEdBQUksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxDQUFULEVBQVksQ0FBQyxDQUFDLE1BQUYsR0FBUyxDQUFyQixFQUFqQzs7d0JBQ0EsRUFBRSxDQUFDLElBQUgsQ0FBUSxDQUFSO3dCQUNBLENBQUEsSUFBSztvQkFMVDtvQkFNQSxDQUFBLEdBQUksRUFBRSxDQUFDLElBQUgsQ0FBUSxJQUFSLEVBVFI7O2dCQVdBLE9BQUEsQ0FBUSxDQUFSLEVBQVcsQ0FBWCxFQUFjLENBQWQsRUF0Q0o7YUFESjs7UUF3Q0EsQ0FBQSxJQUFLO0lBOUNUO1dBZ0RBLEtBQU0sQ0FBQSxDQUFBLENBQUUsQ0FBQztBQWxXTDs7QUFvV1IsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAwMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuMDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDBcbjAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgICAgMDAwICAwMDBcbjAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMFxuIyMjXG5cbnBhcnNlID0gKHMpIC0+XG5cbiAgICByZXR1cm4gJycgaWYgbm90IHNcbiAgICByZXR1cm4gJycgaWYgcyA9PSAnJ1xuICAgIFxuICAgIEVNUFRZICAgPSAvXlxccyokL1xuICAgIE5FV0xJTkUgPSAvXFxyP1xcbi9cbiAgICBGTE9BVCAgID0gL14oXFwtfFxcKyk/KFswLTldKyhcXC5bMC05XSspP3xJbmZpbml0eSkkL1xuICAgIElOVCAgICAgPSAvXihcXC18XFwrKT8oWzAtOV0rfEluZmluaXR5KSQvXG5cbiAgICBsYXN0ID0gKGEpIC0+IGE/W2EubGVuZ3RoLTFdXG4gICAgaXNBcnJheSA9IChhKSAtPiBhPyBhbmQgdHlwZW9mKGEpID09ICdvYmplY3QnIGFuZCBhLmNvbnN0cnVjdG9yLm5hbWUgPT0gJ0FycmF5J1xuXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDAwICAgICAgIDAwMCAgMDAwXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMDBcblxuICAgIHVuZGVuc2UgPSAoZCwgcykgLT4gIyB1bmRlbnNlcyBzdHJpbmcgcyBhdCBkZXB0aCBkLiBSZXR1cm5zIGxpc3Qgb2YgcGFkZGVkIGxpbmVzXG4gICAgICAgIHNsID0gcy5sZW5ndGhcbiAgICAgICAgc2QgPSBkXG5cbiAgICAgICAgcCA9IDBcbiAgICAgICAgd2hpbGUgcCA8IHNsIGFuZCBzW3BdID09ICcuJyAjIGRlcHRoIGRvdHNcbiAgICAgICAgICAgIGQgKz0gMVxuICAgICAgICAgICAgcCArPSAxXG5cbiAgICAgICAgd2hpbGUgcCA8IHNsIGFuZCBzW3BdID09ICcgJyAjIHNwYWNlcyBiZWZvcmUga2V5L2l0ZW1cbiAgICAgICAgICAgIHAgKz0gMVxuXG4gICAgICAgIGwgPSAnJ1xuICAgICAgICBrZXkgPSB0cnVlXG4gICAgICAgIGVzYyA9IGZhbHNlXG5cbiAgICAgICAgd2hpbGUgcCA8IHNsXG4gICAgICAgICAgICBpZiBsICE9ICcnIGFuZCBzW3BdID09ICcgJyBhbmQgc1twKzFdID09ICcuJ1xuICAgICAgICAgICAgICAgIHBwID0gcCsyXG4gICAgICAgICAgICAgICAgd2hpbGUgcHAgPCBzbCBhbmQgc1twcF0gPT0gJy4nXG4gICAgICAgICAgICAgICAgICAgIHBwICs9IDFcbiAgICAgICAgICAgICAgICBpZiBzW3BwXSA9PSAnICdcbiAgICAgICAgICAgICAgICAgICAgcCArPSAxXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBlc2MgfD0gc1twXSA9PSAgJ3wnXG4gICAgICAgICAgICBsICs9IHNbcF1cbiAgICAgICAgICAgIGlmIG5vdCBlc2MgYW5kIGtleSBhbmQgc1twXSA9PSAnICdcbiAgICAgICAgICAgICAgICBpZiBwIDwgc2wrMSBhbmQgc1twKzFdICE9ICcgJ1xuICAgICAgICAgICAgICAgICAgICBsICs9ICcgJ1xuICAgICAgICAgICAgICAgIGtleSA9IGZhbHNlXG4gICAgICAgICAgICBwICs9IDFcbiAgICAgICAgICAgIGVzYyBePSBzW3BdID09ICAnfCdcblxuICAgICAgICBsZCA9ICcnICMgcGFkIGxpbmUgd2l0aCBzcGFjZXNcbiAgICAgICAgZm9yIGkgaW4gWzAuLi5kXVxuICAgICAgICAgICAgbGQgKz0gJyAnXG4gICAgICAgIGxkICs9IGxcblxuICAgICAgICBpZiBwIDwgc2xcbiAgICAgICAgICAgIHQgPSB1bmRlbnNlIHNkLCBzLnN1YnN0cmluZyBwXG4gICAgICAgICAgICB0LnVuc2hpZnQgbGRcbiAgICAgICAgICAgIHRcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgW2xkXVxuXG4gICAgIyAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAgICAgICAwMDAgIDAwMDAwMDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgICAwMDBcbiAgICAjIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMCAgICAgIDAwMCAgICAgMDAwXG4gICAgIyAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMCAgMDAwICAgICAwMDBcblxuICAgIGxlYWRpbmdTcGFjZXMgPSAwXG5cbiAgICBsaW5lcyA9IHMuc3BsaXQoTkVXTElORSkuZmlsdGVyIChsKSAtPiBub3QgRU1QVFkudGVzdCBsXG5cbiAgICBpZiBsaW5lcy5sZW5ndGggPT0gMFxuICAgICAgICByZXR1cm4gJydcbiAgICBlbHNlIGlmIGxpbmVzLmxlbmd0aCA9PSAxXG4gICAgICAgIGxpbmVzID0gW2xpbmVzWzBdLnRyaW0oKV1cbiAgICBlbHNlXG4gICAgICAgIHdoaWxlIGxpbmVzWzBdW2xlYWRpbmdTcGFjZXNdID09ICcgJ1xuICAgICAgICAgICAgbGVhZGluZ1NwYWNlcyArPSAxXG5cbiAgICBzdGFjayA9IFtcbiAgICAgICAgbzogW11cbiAgICAgICAgZDogbGVhZGluZ1NwYWNlc1xuICAgIF1cblxuICAgICMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgICAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAgICAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgICAgICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAgMDAwXG4gICAgIyAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwICAgICAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgICAgICAgIDAwMFxuICAgICMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgICAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMDAwMDBcblxuICAgIG1ha2VPYmplY3QgPSAodCkgLT5cbiAgICAgICAgbyA9IHt9XG4gICAgICAgIGZvciBpIGluIHQub1xuICAgICAgICAgICAgb1tpXSA9IG51bGxcbiAgICAgICAgdC5sID0gbGFzdCB0Lm9cbiAgICAgICAgdC5vID0gb1xuICAgICAgICBpZiBzdGFjay5sZW5ndGggPiAxXG4gICAgICAgICAgICBiID0gc3RhY2tbc3RhY2subGVuZ3RoLTJdXG4gICAgICAgICAgICBpZiBpc0FycmF5IGIub1xuICAgICAgICAgICAgICAgIGIuby5wb3AoKVxuICAgICAgICAgICAgICAgIGIuby5wdXNoIG9cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiLm9bYi5sXSA9IG9cbiAgICAgICAgb1xuXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAgICAgICAwMDAgMDAwXG4gICAgIyAwMDAwMDAwICAgIDAwMDAwMDAgICAgIDAwMDAwXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgICAgICAgICAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgIDAwMFxuXG4gICAga2V5ID0gKGspIC0+XG4gICAgICAgIGlmIGs/WzBdID09ICd8J1xuICAgICAgICAgICAgaWYga1trLmxlbmd0aC0xXSA9PSAnfCdcbiAgICAgICAgICAgICAgICByZXR1cm4gay5zdWJzdHIoMSwgay5sZW5ndGgtMilcbiAgICAgICAgICAgIHJldHVybiBrLnN1YnN0cigxKS50cmltUmlnaHQoKVxuICAgICAgICBrXG5cbiAgICAjIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMFxuICAgICMgIDAwMCAwMDAgICAwMDAwMDAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDBcbiAgICAjICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgIDAwMFxuICAgICMgICAgIDAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDBcblxuICAgIHZhbHVlcyA9XG4gICAgICAgICdudWxsJzogbnVsbFxuICAgICAgICAndHJ1ZSc6IHRydWVcbiAgICAgICAgJ2ZhbHNlJzogZmFsc2VcblxuICAgIHZhbHVlID0gKHYpIC0+XG4gICAgICAgIGlmIHZhbHVlc1t2XSAhPSB1bmRlZmluZWQgIHRoZW4gcmV0dXJuIHZhbHVlc1t2XVxuICAgICAgICBpZiB2P1swXSA9PSAnfCcgdGhlbiByZXR1cm4ga2V5IHZcbiAgICAgICAgZWxzZSBpZiB2P1t2Lmxlbmd0aC0xXSA9PSAnfCdcbiAgICAgICAgICAgIHJldHVybiB2LnN1YnN0cigwLCB2Lmxlbmd0aC0xKVxuICAgICAgICBpZiBGTE9BVC50ZXN0KHYpIHRoZW4gcmV0dXJuIHBhcnNlRmxvYXQgdlxuICAgICAgICBpZiBJTlQudGVzdCh2KSAgIHRoZW4gcmV0dXJuIHBhcnNlSW50ICAgdlxuICAgICAgICB2XG5cbiAgICAjIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAwXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMFxuICAgICMgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAgICAwMDBcbiAgICAjIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgMDAwXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMFxuXG4gICAgaW5zZXJ0ID0gKHQsIGssIHYpIC0+XG4gICAgICAgIGlmIGlzQXJyYXkgdC5vXG4gICAgICAgICAgICBpZiBub3Qgdj9cbiAgICAgICAgICAgICAgICBpZiBsYXN0KHQubykgPT0gJy4nXG4gICAgICAgICAgICAgICAgICAgIHQuby5wb3AoKVxuICAgICAgICAgICAgICAgICAgICB0Lm8ucHVzaCBbXVxuICAgICAgICAgICAgICAgIHQuby5wdXNoIHZhbHVlIGtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtYWtlT2JqZWN0KHQpW2tleSBrXSA9IHZhbHVlIHZcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdC5vW2tleSBrXSA9IHZhbHVlIHZcbiAgICAgICAgICAgIHQubCA9IGtleSBrXG5cbiAgICAjIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMFxuICAgICMgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMDAgIDAwMCAgICAgMDAwXG4gICAgIyAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwIDAgMDAwICAgICAwMDBcbiAgICAjIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMDAgICAgIDAwMFxuICAgICMgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAgMDAwXG5cbiAgICBpbmRlbnQgPSAodCwgaywgdikgLT5cbiAgICAgICAgbyA9IFtdXG4gICAgICAgIG8gPSB7fSBpZiB2P1xuXG4gICAgICAgIGlmIGlzQXJyYXkgdC5vXG4gICAgICAgICAgICBpZiBsYXN0KHQubykgPT0gJy4nXG4gICAgICAgICAgICAgICAgdC5vLnBvcCgpXG4gICAgICAgICAgICAgICAgdC5vLnB1c2ggb1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGwgPSBsYXN0IHQub1xuICAgICAgICAgICAgICAgIG1ha2VPYmplY3QodClcbiAgICAgICAgICAgICAgICB0Lm9bbF0gPSBvXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHQub1t0LmxdID0gb1xuXG4gICAgICAgIGlmIHY/XG4gICAgICAgICAgICBvW2tleSBrXSA9IHZhbHVlIHZcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgby5wdXNoIHZhbHVlIGtcbiAgICAgICAgb1xuXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgMDAwMCAgMDAwICAwMDBcbiAgICAjIDAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgIDAwMCAgMDAwMCAgMDAwXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcblxuICAgIGFkZExpbmUgPSAoZCxrLHYpIC0+XG4gICAgICAgIGlmIGs/XG4gICAgICAgICAgICB0ID0gbGFzdCBzdGFja1xuICAgICAgICAgICAgW3VuZGVuc2VkLCB0LnVuZGVuc2VkXSA9IFt0LnVuZGVuc2VkLCBmYWxzZV1cbiAgICAgICAgICAgIGlmIGQgPiB0LmQgYW5kIG5vdCB1bmRlbnNlZFxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2hcbiAgICAgICAgICAgICAgICAgICAgbzogaW5kZW50IHQsIGssIHZcbiAgICAgICAgICAgICAgICAgICAgZDogZFxuICAgICAgICAgICAgZWxzZSBpZiBkIDwgdC5kXG4gICAgICAgICAgICAgICAgaWYgaXNBcnJheSh0Lm8pIGFuZCBsYXN0KHQubykgPT0gJy4nXG4gICAgICAgICAgICAgICAgICAgIHQuby5wb3AoKVxuICAgICAgICAgICAgICAgICAgICB0Lm8ucHVzaCBbXVxuICAgICAgICAgICAgICAgIHdoaWxlIHQuZCA+IGRcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucG9wKClcbiAgICAgICAgICAgICAgICAgICAgdCA9IGxhc3Qgc3RhY2tcbiAgICAgICAgICAgICAgICBpbnNlcnQgdCwgaywgdlxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlmIHVuZGVuc2VkXG4gICAgICAgICAgICAgICAgICAgIHQuZCA9IGRcbiAgICAgICAgICAgICAgICBpbnNlcnQgdCwgaywgdlxuXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMDBcbiAgICAjIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMFxuICAgICMgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICAgICAgMDAwXG4gICAgIyAwMDAgIDAwMCAgMDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDBcbiAgICAjIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMFxuXG4gICAgaW5zcGVjdCA9IChsKSAtPlxuXG4gICAgICAgIHAgPSAwXG5cbiAgICAgICAgd2hpbGUgbFtwXSA9PSAnICcgIyBwcmVjZWVkaW5nIHNwYWNlc1xuICAgICAgICAgICAgcCArPSAxXG5cbiAgICAgICAgaWYgbm90IGxbcF0/IHRoZW4gcmV0dXJuIFswLCBudWxsLCBudWxsLCBmYWxzZV0gIyBvbmx5IHNwYWNlcyBpbiBsaW5lXG5cbiAgICAgICAgZCA9IHBcbiAgICAgICAgayA9ICcnXG5cbiAgICAgICAgaWYgbFtwXSA9PSAnIycgdGhlbiByZXR1cm4gWzAsIG51bGwsIG51bGwsIGZhbHNlXSAjIGNvbW1lbnQgbGluZVxuXG4gICAgICAgIGVzY2wgPSBmYWxzZVxuICAgICAgICBlc2NyID0gZmFsc2VcbiAgICAgICAgaWYgbFtwXSA9PSAnfCdcbiAgICAgICAgICAgIGVzY2wgPSB0cnVlXG4gICAgICAgICAgICBrICs9ICd8J1xuICAgICAgICAgICAgcCArPSAxXG5cbiAgICAgICAgd2hpbGUgbFtwXT9cbiAgICAgICAgICAgIGlmIGxbcF0gPT0gJyAnIGFuZCBsW3ArMV0gPT0gJyAnIGFuZCBub3QgZXNjbFxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGsgKz0gbFtwXVxuICAgICAgICAgICAgcCArPSAxXG4gICAgICAgICAgICBpZiBlc2NsIGFuZCBsW3AtMV0gPT0gJ3wnXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBpZiBub3QgZXNjbFxuICAgICAgICAgICAgayA9IGsudHJpbVJpZ2h0KClcblxuICAgICAgICB3aGlsZSBsW3BdID09ICcgJyAjIHdoaXRlc3BhY2UgYmV0d2VlbiBrZXkgYW5kIHZhbHVlXG4gICAgICAgICAgICBwICs9IDFcblxuICAgICAgICB2ID0gJydcblxuICAgICAgICBpZiBsW3BdID09ICd8J1xuICAgICAgICAgICAgZXNjciA9IHRydWVcbiAgICAgICAgICAgIHYgKz0gJ3wnXG4gICAgICAgICAgICBwICs9IDFcblxuICAgICAgICB3aGlsZSBsW3BdP1xuICAgICAgICAgICAgdiArPSBsW3BdXG4gICAgICAgICAgICBwICs9IDFcbiAgICAgICAgICAgIGlmIGVzY3IgYW5kIGxbcC0xXSA9PSAnfCcgYW5kIGwudHJpbVJpZ2h0KCkubGVuZ3RoID09IHBcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgIGlmIGxbcC0xXSA9PSAnICcgYW5kIG5vdCBlc2NyXG4gICAgICAgICAgICB2ID0gdi50cmltUmlnaHQoKSBpZiB2P1xuXG4gICAgICAgIGsgPSBudWxsIGlmIGsgPT0gJydcbiAgICAgICAgdiA9IG51bGwgaWYgdiA9PSAnJ1xuICAgICAgICBbZCwgaywgdiwgZXNjbF1cblxuICAgICMgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAgICAgICAwMDAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgICAgICAgMDAwICAgICAgMDAwICAwMDAwICAwMDAgIDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAgICAgICAwMDAgICAgICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMFxuICAgICMgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgICAgICAgICAwMDAgICAgICAwMDAgIDAwMCAgMDAwMCAgMDAwXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgICAgICAgIDAwMDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMFxuXG4gICAgaWYgbGluZXMubGVuZ3RoID09IDFcbiAgICAgICAgaWYgMCA8IGxpbmVzWzBdLmluZGV4T2YgJzo6ICdcbiAgICAgICAgICAgIGxpbmVzID0gbGluZXNbMF0uc3BsaXQoJzo6ICcpLm1hcCAobCkgLT5cbiAgICAgICAgICAgICAgICBwID0gMFxuICAgICAgICAgICAgICAgIHdoaWxlIGxbcF0gPT0gJyAnXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gMVxuICAgICAgICAgICAgICAgIHdoaWxlIGxbcF0/IGFuZCAobFtwXSAhPSAnICcpXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gMVxuICAgICAgICAgICAgICAgIGlmIGxbcF0gPT0gJyAnXG4gICAgICAgICAgICAgICAgICAgIGwuc2xpY2UoMCwgcCkgKyAnICcgKyBsLnNsaWNlKHApXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBsXG4gICAgICAgIHAgPSBsaW5lc1swXS5pbmRleE9mICcgLiAnXG4gICAgICAgIGUgPSBsaW5lc1swXS5pbmRleE9mICd8J1xuICAgICAgICBpZiBwID4gMCBhbmQgKHAgPT0gbGluZXNbMF0uaW5kZXhPZiAnICcpIGFuZCAoZSA8IDAgb3IgcCA8IGUpXG4gICAgICAgICAgICBsaW5lcyA9IFtsaW5lc1swXS5zbGljZSgwLHApICsgJyAnICsgbGluZXNbMF0uc2xpY2UocCldXG5cbiAgICAjIDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgICAgICAgIDAwMCAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgICAgMDAwICAgICAgMDAwICAwMDAwICAwMDAgIDAwMFxuICAgICMgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwICAgICAgIDAwMDAwMDAwMCAgICAgICAgMDAwICAgICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgICAgIDAwMCAgICAgIDAwMCAgMDAwICAwMDAwICAwMDBcbiAgICAjIDAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgICAgICAgIDAwMDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMFxuXG4gICAgaSA9IDBcbiAgICB3aGlsZSBpIDwgbGluZXMubGVuZ3RoXG5cbiAgICAgICAgbGluZSA9IGxpbmVzW2ldXG5cbiAgICAgICAgW2QsIGssIHYsIGVdID0gaW5zcGVjdCBsaW5lXG5cbiAgICAgICAgaWYgaz9cbiAgICAgICAgICAgIGlmIHY/IGFuZCAobm90IGUpIGFuZCAodi5zdWJzdHIoMCwyKSA9PSAnLiAnKSAjIGRlbnNlIHZhbHVlXG4gICAgICAgICAgICAgICAgYWRkTGluZSBkLCBrXG5cbiAgICAgICAgICAgICAgICB1ZCA9IGxhc3Qoc3RhY2spLmRcblxuICAgICAgICAgICAgICAgIGZvciBlIGluIHVuZGVuc2UgZCwgdlxuICAgICAgICAgICAgICAgICAgICBbZGQsZGssZHZdID0gaW5zcGVjdCBlXG4gICAgICAgICAgICAgICAgICAgIGFkZExpbmUgZGQsIGRrLCBkdlxuXG4gICAgICAgICAgICAgICAgd2hpbGUgbGFzdChzdGFjaykuZCA+IHVkKzFcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucG9wKClcbiAgICAgICAgICAgICAgICBsYXN0KHN0YWNrKS51bmRlbnNlZCA9IHRydWVcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpZiBrID09ICcuLi4nIGFuZCBub3Qgdj9cbiAgICAgICAgICAgICAgICAgICAgaSArPSAxXG4gICAgICAgICAgICAgICAgICAgIHZsID0gW11cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgbGluZXNbaV0udHJpbUxlZnQoKS5zdWJzdHIoMCwzKSAhPSAnLi4uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGxpbmVzW2ldLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbFswXSA9PSAnfCcgdGhlbiBsID0gbC5zdWJzdHIgMVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgbFtsLmxlbmd0aC0xXSA9PSAnfCcgdGhlbiBsID0gbC5zdWJzdHIgMCwgbC5sZW5ndGgtMVxuICAgICAgICAgICAgICAgICAgICAgICAgdmwucHVzaCBsXG4gICAgICAgICAgICAgICAgICAgICAgICBpICs9IDFcbiAgICAgICAgICAgICAgICAgICAgayA9IHZsLmpvaW4gJ1xcbidcbiAgICAgICAgICAgICAgICAgICAgciA9IGxpbmVzW2ldLnRyaW1MZWZ0KCkuc3Vic3RyKDMpLnRyaW0oKVxuICAgICAgICAgICAgICAgICAgICBpZiByLmxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHJcblxuICAgICAgICAgICAgICAgIGlmIHYgPT0gJy4uLidcbiAgICAgICAgICAgICAgICAgICAgaSArPSAxXG4gICAgICAgICAgICAgICAgICAgIHZsID0gW11cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgbGluZXNbaV0udHJpbSgpICE9ICcuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gbGluZXNbaV0udHJpbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsWzBdID09ICd8JyB0aGVuIGwgPSBsLnN1YnN0ciAxXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBsW2wubGVuZ3RoLTFdID09ICd8JyB0aGVuIGwgPSBsLnN1YnN0ciAwLCBsLmxlbmd0aC0xXG4gICAgICAgICAgICAgICAgICAgICAgICB2bC5wdXNoIGxcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gMVxuICAgICAgICAgICAgICAgICAgICB2ID0gdmwuam9pbiAnXFxuJ1xuXG4gICAgICAgICAgICAgICAgYWRkTGluZSBkLCBrLCB2XG4gICAgICAgIGkgKz0gMVxuXG4gICAgc3RhY2tbMF0ub1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlXG4iXX0=
//# sourceURL=../coffee/parse.coffee