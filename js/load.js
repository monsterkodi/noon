// koffee 0.52.0

/*
000       0000000    0000000   0000000  
000      000   000  000   000  000   000
000      000   000  000000000  000   000
000      000   000  000   000  000   000
0000000   0000000   000   000  0000000
 */
var load, parseStr;

parseStr = function(str, p, ext) {
    var extname;
    if (str.length <= 0) {
        return null;
    }
    extname = ext != null ? ext : require('path').extname(p);
    switch (extname) {
        case '.json':
            return JSON.parse(str);
        case '.yml':
        case '.yaml':
            return require('js-yaml').load(str);
        default:
            return require('./parse')(str);
    }
};

load = function(p, ext, cb) {
    var fs, str;
    fs = require('fs');
    if ('function' === typeof ext) {
        cb = ext;
    }
    if ('function' === typeof cb) {
        return fs.readFile(p, 'utf8', function(e, str) {
            if (e != null) {
                console.error("error reading file: " + p, e);
                return cb(null);
            } else {
                return cb(parseStr(str, p, ext));
            }
        });
    } else {
        str = fs.readFileSync(p, 'utf8');
        return parseStr(str, p, ext);
    }
};

module.exports = load;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZC5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsUUFBQSxHQUFXLFNBQUMsR0FBRCxFQUFNLENBQU4sRUFBUyxHQUFUO0FBRVAsUUFBQTtJQUFBLElBQUcsR0FBRyxDQUFDLE1BQUosSUFBYyxDQUFqQjtBQUNJLGVBQU8sS0FEWDs7SUFHQSxPQUFBLGlCQUFVLE1BQU0sT0FBQSxDQUFRLE1BQVIsQ0FBZSxDQUFDLE9BQWhCLENBQXdCLENBQXhCO0FBQ2hCLFlBQU8sT0FBUDtBQUFBLGFBQ1MsT0FEVDttQkFDc0IsSUFBSSxDQUFDLEtBQUwsQ0FBVyxHQUFYO0FBRHRCLGFBRVMsTUFGVDtBQUFBLGFBRWlCLE9BRmpCO21CQUU4QixPQUFBLENBQVEsU0FBUixDQUFrQixDQUFDLElBQW5CLENBQXdCLEdBQXhCO0FBRjlCO21CQUlRLE9BQUEsQ0FBUSxTQUFSLENBQUEsQ0FBbUIsR0FBbkI7QUFKUjtBQU5POztBQVlYLElBQUEsR0FBTyxTQUFDLENBQUQsRUFBSSxHQUFKLEVBQVMsRUFBVDtBQUVILFFBQUE7SUFBQSxFQUFBLEdBQUssT0FBQSxDQUFRLElBQVI7SUFFTCxJQUFZLFVBQUEsS0FBYyxPQUFPLEdBQWpDO1FBQUEsRUFBQSxHQUFLLElBQUw7O0lBRUEsSUFBRyxVQUFBLEtBQWMsT0FBTyxFQUF4QjtlQUVJLEVBQUUsQ0FBQyxRQUFILENBQVksQ0FBWixFQUFlLE1BQWYsRUFBdUIsU0FBQyxDQUFELEVBQUksR0FBSjtZQUNuQixJQUFHLFNBQUg7Z0JBQ0csT0FBQSxDQUFDLEtBQUQsQ0FBTyxzQkFBQSxHQUF1QixDQUE5QixFQUFtQyxDQUFuQzt1QkFDQyxFQUFBLENBQUcsSUFBSCxFQUZKO2FBQUEsTUFBQTt1QkFJSSxFQUFBLENBQUcsUUFBQSxDQUFTLEdBQVQsRUFBYyxDQUFkLEVBQWlCLEdBQWpCLENBQUgsRUFKSjs7UUFEbUIsQ0FBdkIsRUFGSjtLQUFBLE1BQUE7UUFVSSxHQUFBLEdBQU0sRUFBRSxDQUFDLFlBQUgsQ0FBZ0IsQ0FBaEIsRUFBbUIsTUFBbkI7ZUFFTixRQUFBLENBQVMsR0FBVCxFQUFjLENBQWQsRUFBaUIsR0FBakIsRUFaSjs7QUFORzs7QUFvQlAsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMCAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICBcbjAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMCAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICAwMDAgICAwMDBcbjAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICBcbiMjI1xuXG5wYXJzZVN0ciA9IChzdHIsIHAsIGV4dCkgLT5cbiAgICBcbiAgICBpZiBzdHIubGVuZ3RoIDw9IDBcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgXG4gICAgZXh0bmFtZSA9IGV4dCA/IHJlcXVpcmUoJ3BhdGgnKS5leHRuYW1lIHBcbiAgICBzd2l0Y2ggZXh0bmFtZVxuICAgICAgICB3aGVuICcuanNvbicgdGhlbiBKU09OLnBhcnNlIHN0clxuICAgICAgICB3aGVuICcueW1sJywgJy55YW1sJyB0aGVuIHJlcXVpcmUoJ2pzLXlhbWwnKS5sb2FkIHN0clxuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXF1aXJlKCcuL3BhcnNlJykgc3RyXG5cbmxvYWQgPSAocCwgZXh0LCBjYikgLT5cblxuICAgIGZzID0gcmVxdWlyZSAnZnMnXG4gICAgXG4gICAgY2IgPSBleHQgaWYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZXh0XG4gICAgXG4gICAgaWYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgY2JcbiAgICAgICAgXG4gICAgICAgIGZzLnJlYWRGaWxlIHAsICd1dGY4JywgKGUsIHN0cikgLT5cbiAgICAgICAgICAgIGlmIGU/XG4gICAgICAgICAgICAgICAgZXJyb3IgXCJlcnJvciByZWFkaW5nIGZpbGU6ICN7cH1cIiwgZVxuICAgICAgICAgICAgICAgIGNiIG51bGxcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjYiBwYXJzZVN0ciBzdHIsIHAsIGV4dFxuICAgICAgICBcbiAgICBlbHNlXG4gICAgICAgIHN0ciA9IGZzLnJlYWRGaWxlU3luYyBwLCAndXRmOCdcbiAgICBcbiAgICAgICAgcGFyc2VTdHIgc3RyLCBwLCBleHRcbiAgICBcbm1vZHVsZS5leHBvcnRzID0gbG9hZFxuIl19
//# sourceURL=../coffee/load.coffee